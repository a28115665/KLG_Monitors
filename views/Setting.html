<div class="row" data-ng-controller="SettingCtrl">

	<div class="col-sm-12">

		<!-- start row -->

		<div class="row">

			<div class="col-xs-12 col-sm-7 col-md-7 col-lg-6">
				<h1 class="page-title">
					<i class="fa fa-gear fa-fw "></i> 
						帳號管理
				</h1>

			</div>

			<article class="col-sm-6">
				<!-- <div class="collapse navbar-collapse"> -->
					<!-- <ul class="nav navbar-nav navbar-right"
						 data-ng-if="UserInfo.U_Role == 'Admin'">
						<li class="active bg-color-info" style="border-style:dashed;">
							<a href="javascript:void(0);"
							   data-ng-click="postNewsOnBoard()">發佈新訊息</a>
						</li>
					</ul> -->
					<!-- <form class="navbar-form navbar-right smart-form ng-pristine ng-valid" role="search">
						<div class="form-group">
							<label class="input" style="margin-top:7px"> 
								<i class="icon-append fa fa-search"></i>
								<input type="text" 
									   name="search" 
									   placeholder="Search"
									   data-ng-model="searchKeywords"
								   	   data-ng-keyup='searchData(board,"Board")'>
								<b class="tooltip tooltip-bottom-right">Search the Board</b> 
							</label>
						</div>
					</form>
					<ul class="nav navbar-nav navbar-right">
						<li style="padding-top:5px;">
							<h1 class="font-md"><small class="text-danger"> &nbsp;&nbsp;({{filteredBoardStores.length}} 項結果)&nbsp;&nbsp;</small></h1>
						</li>
					</ul> -->
				<!-- </div> -->

			</article>

		</div>
		<!-- end row -->

		<div class="col-sm-12">
		<!-- <div id="myCarousel" class="carousel fade profile-carousel">
			<div class="air air-top-left padding-10">
				<h4 class="txt-color-white font-md">{{nowTime}}</h4>
			</div>
			<ol class="carousel-indicators">
				<li data-target="#myCarousel" data-slide-to="0" class="active"></li>
				<li data-target="#myCarousel" data-slide-to="1" class=""></li>
				<li data-target="#myCarousel" data-slide-to="2" class=""></li>
			</ol>
			<div class="carousel-inner">
				<div class="item active">
					<img src="img/demo/s1.jpg" alt="">
				</div>
				<div class="item">
					<img src="img/demo/s2.jpg" alt="">
				</div>
				<div class="item">
					<img src="img/demo/m3.jpg" alt="">
				</div>
			</div>
		</div> -->
	</div>

	<div class="col-sm-12">

		<div class="row" style="margin-top: 10px;">

			<div class="col-sm-2 profile-pic">
				<img src="img/avatars/adm-big.png" data-ng-if="UserInfo.U_Role == 'Admin'">
				<img src="img/avatars/male-big.png" data-ng-if="UserInfo.U_Role == 'User'">
			</div>
			<div class="col-sm-6">
				<h1>{{UserInfo.U_Name}} <span class="semi-bold"></span>
				<br>
				<small><i class="fa fa-user" style="width:13px"></i>&nbsp;&nbsp;{{UserInfo.U_Role}}</small></h1>

				<ul class="list-unstyled">
					<li data-ng-if="(UserInfo.U_Role == 'Admin')">
						<p class="text-muted">
							<i class="fa fa-sun-o" style="width:13px"></i>&nbsp;&nbsp;<span class="txt-color-darken">系統</span>
						</p>
					</li>
					<li data-ng-if="(UserInfo.U_Role == 'User')">
						<p class="text-muted">
							<i class="fa fa-sun-o" style="width:13px"></i>&nbsp;&nbsp;<span class="txt-color-darken">{{UserInfo.B_Name}}</span>
						</p>
					</li>
					<li data-ng-if="(UserInfo.U_Role == 'User')">
						<p class="text-muted">
							<i class="fa fa-building" style="width:13px"></i>&nbsp;&nbsp;<span class="txt-color-darken">{{UserInfo.P_Name}}</span>
						</p>
					</li>
					<li data-ng-if="(UserInfo.U_Role != 'Guest')">
						<p class="text-muted">
							<i class="fa fa-key"></i>&nbsp;&nbsp;<span class="txt-color-darken">
								<a href="javascript:void(0);" 
								   class="btn bg-color-red txt-color-white"
								   data-ng-click="openChangePW(UserInfo)">變更密碼</a></span>
						</p>
					</li>
				</ul>

			</div>
			<div class="col-sm-3">

			</div>

		</div>

	</div>

	<div class="col-sm-12" data-ng-show="UserInfo.U_Role == 'Admin'">
		<ul id="myTab1" class="nav nav-tabs bordered">
			<li class="active">
				<a href="#s1" data-toggle="tab" data-ng-click="handleWindowResize(gridAccountApi)"><i class="fa fa-fw fa-lg fa-users"></i>&nbsp;帳號管理</a>
			</li>
			<li>
				<a href="#s2" data-toggle="tab" data-ng-click="handleWindowResize(gridBranchApi)"><i class="fa fa-fw fa-lg fa-sun-o"></i>&nbsp;分局管理 </a>
			</li>
			<li>
				<a href="#s3" data-toggle="tab" data-ng-click="handleWindowResize(gridPoliceApi)"><i class="fa fa-fw fa-lg fa-building"></i>&nbsp;派出所管理 </a>
			</li>
		</ul>
		<div id="myTabContent1" class="tab-content padding-10 well">
			<div class="tab-pane fade in active" 
				 id="s1"
				 data-ng-init="loadUserInfo()">
				<div ui-grid="settingOptions" ui-grid-resize-columns ui-grid-edit ui-grid-row-edit external-scopes="settinges" style="height: 500px;"></div>
			</div>
			<div class="tab-pane fade" 
				 id="s2">
				 <div class="row">
				 	<div class="col-md-12">
						<form>
							<div class="col-xs-12 col-sm-2 text-left">
								<i class="fa fa-sun-o fa-lg txt-color-blue"></i>
								<label class="font-md txt-color-blue">&nbsp;輸入名稱</label>
							</div>
							<div class="col-xs-12 col-sm-2 smart-form">
								<div class="form-group">
									<label class="input">
										<input type="text"
											   class="input"
											   id="addBranch" 
											   name="addBranch" 
											   data-ng-model="addBranch"
											   placeholder="分局">
										<b class="tooltip tooltip-top-left">例如: 第一分局</b> 
									</label>
								</div>
							</div>
							<div class="col-xs-12 col-sm-6"/>
							<div class="col-xs-12 col-sm-2 text-right">
								<button type="button" 
										class="btn btn-labeled btn-warning"
										data-ng-click="AddBranch(addBranch)"
					    				data-ng-disabled="!addBranch">
								 	<span class="btn-label">
								  		<i class="fa fa-plus-square-o"></i>
								 	</span>新增確認
								</button>
							</div>
						</form>
				 	</div>
				 	<div class="col-md-12" style="margin-top: 10px;">
						<div ui-grid="branchOptions" ui-grid-resize-columns ui-grid-edit ui-grid-row-edit style="height: 500px;"></div>
				 	</div>
				 </div>
			</div>
			<div class="tab-pane fade" 
				 id="s3">
				 <div class="row">
				 	<div class="col-md-12">
						<form>
							<div class="col-xs-12 col-sm-2 text-left">
								<i class="fa fa-building fa-lg txt-color-blue"></i>
								<label class="font-md txt-color-blue">&nbsp;輸入名稱</label>
							</div>
							<div class="col-xs-12 col-sm-2 smart-form">
								<div class="form-group">
									<select class="form-control input-sm"
										    data-ng-model="addBPolice" 
										    ng-options="data.B_ID as data.B_Name for data in settingBranch">
										<option value="">-- 請選擇分局 --</option>
									</select>
								</div>
							</div>
							<div class="col-xs-12 col-sm-2 smart-form">
								<div class="form-group">
									<label class="input">
										<input type="text"
											   class="input"
											   id="addPolice" 
											   name="addPolice" 
											   data-ng-model="addPolice"
											   placeholder="派出所"
				    						   data-ng-disabled="!addBPolice.toString()">
										<b class="tooltip tooltip-top-left">例如: 忠二路派出所</b> 
									</label>
								</div>
							</div>
							<div class="col-xs-12 col-sm-4"/>
							<div class="col-xs-12 col-sm-2 text-right">
								<button type="button" 
										class="btn btn-labeled btn-warning"
										data-ng-click="AddPolice(addBPolice, addPolice)"
					    				data-ng-disabled="!(addPolice.toString() && addBPolice.toString())">
								 	<span class="btn-label">
								  		<i class="fa fa-plus-square-o"></i>
								 	</span>新增確認
								</button>
							</div>
						</form>
				 	</div>
				 	<div class="col-md-12" style="margin-top: 10px;">
						<div ui-grid="policeOptions" ui-grid-resize-columns ui-grid-edit ui-grid-row-edit style="height: 500px;"></div>
				 	</div>
				</div>
			 </div>
		</div>
	</div>
	
</div>
<!-- End of Row -->

<script type="text/ng-template" id="ChangePW.html">
    <div class="modal-header">
		<div class="modal-title">
			<p>
				更改密碼
			</p>
		</div>
    </div>
    <div class="modal-body">
    	<form class="form-horizontal">			
			<fieldset>
				<div class="form-group">
					<label class="col-md-2 control-label">舊密碼</label>
					<div class="col-md-10">
						<input class="form-control" 
							   placeholder="輸入舊密碼" 
							   type="password"
							   data-ng-model="oldPW">
					</div>
				</div>
		        <div class="form-group">
					<label class="col-md-2 control-label">新密碼</label>
					<div class="col-md-10">
						<input class="form-control" 
							   placeholder="輸入新密碼" 
							   type="password"
							   data-ng-model="newPW">
					</div>
				</div>
				<div class="form-group">
					<label class="col-md-2 control-label">確認新密碼</label>
					<div class="col-md-10">
						<input class="form-control" 
							   placeholder="再一次輸入新密碼" 
							   type="password"
							   data-ng-model="confirmNewPW">
					</div>
				</div>
				<div class="alert adjusted alert-danger fade in"
					 data-ng-show="showError">
					<i class="fa-fw fa-lg fa fa-exclamation-triangle"></i>
					確認新舊密碼輸入是否正確
				</div>
			</fieldset>
		</form>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="ok(oldPW,newPW,confirmNewPW)">確認</button>
        <button class="btn btn-warning" ng-click="cancel()">取消</button>
    </div>
</script>

<script type="text/ng-template" id="deleteData.html">
	<div class="modal-header">
		<h3 class="modal-title">
			<strong class="label label-danger">訊息</strong>
		</h3>
    </div>
    <div class="modal-body">
    	<table class="table table-bordered">
			<thead>
				<tr>
					<th width="50%">名稱</th>
					<th width="50%">內容</th>
				</tr>
			</thead>
			<tbody>
				<tr data-ng-repeat="data in selected">
					<td>
					<code>
						{{data.name}}
					</code></td>
					<td>{{data.content}}</td>
				</tr>
			</tbody>
		</table>
    	<p>{{selected.C_Plate}}</p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-danger" ng-click="ok(selected)">刪除</button>
        <button class="btn btn-default" ng-click="cancel()">取消</button>
    </div>
</script>
